!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var n=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sound=document.createElement("audio"),this.sound.src=e,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",this.volume={min:.05,max:.2},this.sound.volume=this.volume.min,this.sound.loop=i,document.body.appendChild(this.sound)}var e,i,n;return e=t,(i=[{key:"deleteFromDom",value:function(){document.body.removeChild(this.sound)}},{key:"play",value:function(){this.sound.play()}},{key:"stop",value:function(){this.sound.pause(),this.sound.currentTime=0}},{key:"volumeSetter",set:function(t){this.sound.volume=t}}])&&o(e.prototype,i),n&&o(e,n),t}();function s(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=function(){function t(e,i,o,s,r,h,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.relSpeed=800,this.tankSpeed=l,this.direction=h,this.size={width:e,height:5},this.field=o,this.world=i,this.left=s,this.top=r,this.sound=new n("./audio/bullet02_shot.wav"),this.sound.volumeSetter=.5,this.sound.play(),this.createDom(),this.world.addChildSetter=this,this.move()}var e,i,o;return e=t,(i=[{key:"move",value:function(){var t=this,e=null,i=this.left,o=this.top;window.requestAnimationFrame(function n(s){t.isEndOfPath()?t.deleteFromDom():window.requestAnimationFrame(n),e||(e=s);var r=s-e;t.leftSetter=i+t.fullSpeed.toRight*r/1e3,t.topSetter=o+t.fullSpeed.toBottom*r/1e3})}},{key:"isEndOfPath",value:function(){return console.log(this.cell),this.leftInField>=this.field.size.width||this.leftInField<=0||this.topInField>=this.field.size.height||this.topInField<=0||null!==this.cell.object||this.left<=0||this.top<=0||this.left>=this.world.size.width||this.top>=this.world.size.height}},{key:"deleteFromDom",value:function(){var t=this;void 0!==this.cell&&null!==this.cell.object&&(this.cell.object.resourceSetter=this.cell.object.resource-1),this.world.dom.removeChild(this.dom),setTimeout(function(){t.sound.deleteFromDom()},1e3)}},{key:"placeInDom",value:function(){this.dom.style.left="".concat(this.left,"px"),this.dom.style.top="".concat(this.top,"px")}},{key:"createDom",value:function(){this.dom=document.createElement("div"),this.dom.classList.add("bullet"),this.dom.style.width="".concat(this.size.width,"px"),this.dom.style.height="".concat(this.size.height,"px"),this.world.dom.appendChild(this.dom),this.placeInDom()}},{key:"cell",get:function(){var t=Math.max(0,Math.min(this.world.sizeInCells.width-1,Math.floor(this.left/this.world.cellSize.width))),e=Math.max(0,Math.min(this.world.sizeInCells.height-1,Math.floor(this.top/this.world.cellSize.height)));return this.world.cells[t][e]}},{key:"fullSpeed",get:function(){return{toRight:this.relSpeed*Math.cos(this.direction),toBottom:-this.relSpeed*Math.sin(this.direction)}}},{key:"topInField",get:function(){return(this.top-this.field.topInWorld)*Math.cos(this.field.directionInWorld)+(this.left-this.field.leftInWorld)*Math.sin(this.field.directionInWorld)}},{key:"leftInField",get:function(){return(this.left-this.field.leftInWorld)*Math.cos(this.field.directionInWorld)-(this.top-this.field.topInWorld)*Math.sin(this.field.directionInWorld)}},{key:"leftSetter",set:function(t){this.left=Math.max(0,Math.min(this.world.size.width,t)),this.placeInDom()}},{key:"topSetter",set:function(t){this.top=Math.max(0,Math.min(this.world.size.height,t)),this.placeInDom()}}])&&s(e.prototype,i),o&&s(e,o),t}();function h(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tank=e,this.barrel={size:{width:6,height:50}},this.turret={size:{width:40,height:50}},this.direction=i,this.createTankGunDom()}var e,i,o;return e=t,(i=[{key:"rotateTurret",value:function(){this.turretDom.style.transform="rotate(".concat(180*-this.direction/Math.PI+90,"deg)")}},{key:"createTankGunDom",value:function(){this.turretDom=document.createElement("div"),this.tank.dom.appendChild(this.turretDom),this.turretDom.classList.add("tankTurret"),this.turretDom.style.width="".concat(this.turret.size.width,"px"),this.turretDom.style.height="".concat(this.turret.size.height,"px"),this.turretDom.style.top="".concat((this.tank.size.height-this.turret.size.height)/2,"px"),this.turretDom.style.left="".concat((this.tank.size.width-this.turret.size.width)/2,"px"),this.rotateTurret(),this.barrelDom=document.createElement("div"),this.turretDom.appendChild(this.barrelDom),this.barrelDom.classList.add("tankBarrel"),this.barrelDom.style.width="".concat(this.barrel.size.width,"px"),this.barrelDom.style.height="".concat(this.barrel.size.height,"px"),this.barrelDom.style.left="".concat((this.turret.size.width-this.barrel.size.width)/2,"px"),this.barrelDom.style.top="".concat(-this.barrel.size.height,"px")}},{key:"directionSetter",set:function(t){this.direction=t,this.rotateTurret()}}])&&h(e.prototype,i),o&&h(e,o),t}();function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var d=function(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)},c=function(t,e){t.indexOf(e)>=0||t.push(e)},u=function(t){return"KeyW"===t},f=function(t){return"KeyA"===t||"KeyD"===t},m=function(){function t(e,i,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.animTimeStep=10,this.fireRate=5,this.speed={linear:200,radial:1},this.world=e,this.field=i,this.bulletWidth=5,this.gunRotateStep=.005,this.size={width:70,height:100},this.left=o,this.top=n,this.keyCodes={move:[],turn:[],fight:[],turret:[]},this.direction=Math.PI/2,this.resource=100,this.createDom(),this.addManipulation(),this.world.addChildSetter=this,this.field.tankResourceSetter=this.resource,this.tankGun=new l(this,Math.PI/2)}var e,i,o;return e=t,(i=[{key:"isMoveKeyCode",value:function(t){return t===Object.keys(this.arrowHandlers)[0]||t===Object.keys(this.arrowHandlers)[2]}},{key:"isTurnKeyCode",value:function(t){return t===Object.keys(this.arrowHandlers)[1]||t===Object.keys(this.arrowHandlers)[3]}},{key:"moveWorld",value:function(){this.distToEdge.top<=this.minDistToEdge.top&&(this.world.topSetter=this.world.top+this.minDistToEdge.top-this.distToEdge.top),this.distToEdge.bottom<=this.minDistToEdge.bottom&&(this.world.topSetter=this.world.top-this.minDistToEdge.bottom+this.distToEdge.bottom),this.distToEdge.left<=this.minDistToEdge.horizontal&&(this.world.leftSetter=this.world.left+this.minDistToEdge.horizontal-this.distToEdge.left),this.distToEdge.right<=this.minDistToEdge.horizontal&&(this.world.leftSetter=this.world.left-this.minDistToEdge.horizontal+this.distToEdge.right)}},{key:"placeDom",value:function(){this.dom.style.left="".concat(this.left-this.size.width/2,"px"),this.dom.style.top="".concat(this.top-this.size.height/2,"px"),this.dom.style.transform="rotate(".concat(90-180*this.direction/Math.PI,"deg)")}},{key:"createDom",value:function(t,e){this.dom=document.createElement("div"),this.dom.classList.add("tank"),this.dom.style.width="".concat(this.size.width,"px"),this.dom.style.height="".concat(this.size.height,"px"),this.world.dom.appendChild(this.dom),this.placeDom(),this.sound={move:new n("./audio/tankMove.mp3",!0),turretTurn:new n("./audio/turretMove.mp3",!0)}}},{key:"move",value:function(){var t=this;this.sound.move.play();var e=setInterval(function(){if(0===t.keyCodes.move.length)return clearInterval(e),void t.sound.move.stop();t.keyCodes.move.forEach(function(e){t.handleKey(e)})},this.animTimeStep)}},{key:"fight",value:function(){var t=this,e=0,i=0,o=setInterval(function(){0!==t.keyCodes.fight.length?(t.keyCodes.fight.forEach(function(o){Math.floor(e/1e3*t.fireRate===i)&&(t.handleKey(o),i++)}),e+=t.animTimeStep):clearInterval(o)},this.animTimeStep)}},{key:"turn",value:function(){var t=this,e=setInterval(function(){0!==t.keyCodes.turn.length?t.keyCodes.turn.forEach(function(e){t.handleKey(e)}):clearInterval(e)},this.animTimeStep)}},{key:"turretTurn",value:function(){var t=this;this.sound.turretTurn.play();var e=setInterval(function(){if(0===t.keyCodes.turret.length)return clearInterval(e),void t.sound.turretTurn.stop();t.keyCodes.turret.forEach(function(e){t.handleKey(e)})},this.animTimeStep)}},{key:"handleKey",value:function(t){switch(t){case"KeyW":new r(this.bulletWidth,this.world,this.field,this.endOfBarrel.left,this.endOfBarrel.top,this.tankGun.direction+this.direction-Math.PI/2,this.currentSpeed);break;case"KeyA":this.tankGun.directionSetter=this.tankGun.direction+this.gunRotateStep;break;case"KeyD":this.tankGun.directionSetter=this.tankGun.direction-this.gunRotateStep;break;case"ArrowLeft":this.arrowHandlers.ArrowLeft.call(this);break;case"ArrowRight":this.arrowHandlers.ArrowRight.call(this);break;case"ArrowUp":this.arrowHandlers.ArrowUp.call(this);break;case"ArrowDown":this.arrowHandlers.ArrowDown.call(this)}}},{key:"delManipulation",value:function(){window.onkeydown=null}},{key:"addManipulation",value:function(){var t=this;window.onkeyup=function(e){t.isMoveKeyCode(e.code)&&d(t.keyCodes.move,e.code),t.isTurnKeyCode(e.code)&&d(t.keyCodes.turn,e.code),f(e.code)&&d(t.keyCodes.turret,e.code),u(e.code)&&d(t.keyCodes.fight,e.code)},window.onkeydown=function(e){t.isMoveKeyCode(e.code)&&(0===t.keyCodes.move.length?(c(t.keyCodes.move,e.code),t.move()):c(t.keyCodes.move,e.code)),t.isTurnKeyCode(e.code)&&(0===t.keyCodes.turn.length&&(c(t.keyCodes.turn,e.code),t.turn()),c(t.keyCodes.turn,e.code)),f(e.code)&&(0===t.keyCodes.turret.length?(c(t.keyCodes.turret,e.code),t.turretTurn()):c(t.keyCodes.turret,e.code)),u(e.code)&&(0===t.keyCodes.fight.length&&(c(t.keyCodes.fight,e.code),t.fight()),c(t.keyCodes.fight,e.code))}}},{key:"minDistToEdge",get:function(){return{horizontal:.5*window.innerWidth,top:.8*window.innerHeight,bottom:.1*window.innerHeight}}},{key:"resourceSetter",set:function(t){this.resource=Math.max(0,t),this.field.tankResourceSetter=t.toFixed(0),this.resource<=0&&(this.delManipulation(),this.field.endGame())}},{key:"moveSoundSetter",set:function(t){"stop"===t&&this.sound.move.stop(),"play"===t&&this.sound.move.play()}},{key:"turretSoundSetter",set:function(t){"stop"===t&&this.sound.turretTurn.stop(),"play"===t&&this.sound.turretTurn.play()}},{key:"directionSetter",set:function(t){this.direction=(2*Math.PI+t)%(2*Math.PI),this.placeDom()}},{key:"directionInField",get:function(){return(2*Math.PI+this.direction-this.field.directionInWorld)%(2*Math.PI)}},{key:"arrowHandlers",get:function(){var t=this;return{ArrowUp:function(){t.topSetter=t.top+t.currentSpeed.toBottom*t.animTimeStep/1e3,t.leftSetter=t.left+t.currentSpeed.toRight*t.animTimeStep/1e3},ArrowLeft:function(){t.directionSetter=t.direction+t.animTimeStep*t.currentSpeed.radial/1e3,console.log(t.directionInField),(t.directionInField<Math.PI/4||t.directionInField>3*Math.PI/4)&&(t.world.rotateSetter={left:t.left,top:t.top,angle:-t.animTimeStep*t.currentSpeed.radial/1e3})},ArrowDown:function(){t.topSetter=t.top+t.currentSpeed.toBottom*t.animTimeStep/1e3,t.leftSetter=t.left+t.currentSpeed.toRight*t.animTimeStep/1e3},ArrowRight:function(){t.directionSetter=t.direction-t.animTimeStep*t.currentSpeed.radial/1e3,(t.directionInField<Math.PI/4||t.directionInField>3*Math.PI/4)&&(t.world.rotateSetter={left:t.left,top:t.top,angle:t.animTimeStep*t.currentSpeed.radial/1e3})}}}},{key:"endOfBarrel",get:function(){var t=this.tankGun.turret.size.height/2+this.tankGun.barrel.size.height,e=this.tankGun.direction+this.direction-Math.PI/2;return{left:this.left+t*Math.cos(e)-this.tankGun.barrel.size.width/2,top:this.top-t*Math.sin(e)-this.tankGun.barrel.size.width/2}}},{key:"currentSpeed",get:function(){var t=(this.keyCodes.move.indexOf("ArrowUp")>=0)-(this.keyCodes.move.indexOf("ArrowDown")>=0);return{sign:t,toRight:t*this.speed.linear*Math.cos(this.direction),toBottom:-t*this.speed.linear*Math.sin(this.direction),radial:this.speed.radial*t}}},{key:"leftSetter",set:function(t){this.left=Math.max(this.size.height/2,Math.min(this.world.size.width-this.size.height/2,t)),this.moveWorld(),this.placeDom()}},{key:"topSetter",set:function(t){this.top=Math.max(this.size.height/2,Math.min(this.world.size.height-this.size.height/2,t)),this.moveWorld(),this.placeDom()}},{key:"topInField",get:function(){return(this.top-this.field.topInWorld)*Math.cos(this.field.directionInWorld)+(this.left-this.field.leftInWorld)*Math.sin(this.field.directionInWorld)}},{key:"leftInField",get:function(){return(this.left-this.field.leftInWorld)*Math.cos(this.field.directionInWorld)-(this.top-this.field.topInWorld)*Math.sin(this.field.directionInWorld)}},{key:"distToEdge",get:function(){return{left:this.leftInField,top:this.topInField,right:this.field.size.width-this.leftInField,bottom:this.field.size.height-this.topInField}}}])&&a(e.prototype,i),o&&a(e,o),t}();function p(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var y=function(){function t(e,i,o,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size={width:n,height:s},this.leftNum=i,this.topNum=o,this.world=e,this.object=null}var e,i,o;return e=t,(i=[{key:"createDom",value:function(){this.cellDom=document.createElement("div"),this.world.dom.appendChild(this.cellDom),this.cellDom.classList.add("cell"),this.cellDom.style.width=this.size.width+"px",this.cellDom.style.height=this.size.height+"px",this.cellDom.style.left=this.leftNum*this.size.width+"px",this.cellDom.style.top=this.topNum*this.size.height+"px"}}])&&p(e.prototype,i),o&&p(e,o),t}();function w(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var g=function(){function t(e,i,o,n,s,r,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sizeInCells={width:n,height:s},this.cellSize={width:r,height:h},this.size={width:this.sizeInCells.width*this.cellSize.width,height:this.sizeInCells.height*this.cellSize.height},this.field=e,this.cells=[],this.childs=[],this.left=-i,this.top=-o,this.direction=0,this.field.worldSetter=this,this.createDom(),this.addCells()}var e,i,o;return e=t,(i=[{key:"placeDom",value:function(){this.dom.style.left=this.left+"px",this.dom.style.top=this.top+"px",this.dom.style.transform="rotate("+180*-this.direction/Math.PI+"deg)"}},{key:"createDom",value:function(){this.dom=document.createElement("div"),this.dom.classList.add("world"),this.field.dom.appendChild(this.dom),this.dom.style.width=this.size.width+"px",this.dom.style.height=this.size.height+"px",this.dom.style.transformOrigin="0 0",this.placeDom()}},{key:"addCells",value:function(){for(var t=0;t<this.sizeInCells.width;t++){this.cells.push([]);for(var e=0;e<this.sizeInCells.height;e++)this.cells[t].push(new y(this,t,e,this.cellSize.width,this.cellSize.height))}}},{key:"addChildSetter",set:function(t){this.childs.push(t)}},{key:"leftSetter",set:function(t){this.left=t,this.placeDom()}},{key:"topSetter",set:function(t){this.top=t,this.placeDom()}},{key:"directionSetter",set:function(t){this.direction=t%(2*Math.PI)}},{key:"rotateSetter",set:function(t){var e=t.left,i=t.top,o=t.angle,n=this.direction,s=this.direction+o,r=Math.pow(Math.pow(e,2)+Math.pow(i,2),.5);if(0===r)var h=0;else h=Math.acos(e/r);this.directionSetter=s,this.leftSetter=this.left+r*(Math.cos(h-n)-Math.cos(h-s)),this.topSetter=this.top+r*(Math.sin(h-n)-Math.sin(h-s)),this.placeDom()}}])&&w(e.prototype,i),o&&w(e,o),t}();function v(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var k=function(){function t(e,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createdom()}var e,i,o;return e=t,(i=[{key:"showTankResource",value:function(t){this.tankResourceDom.innerHTML=t}},{key:"endGame",value:function(){this.dom.classList.add("fieldEndGame")}},{key:"createdom",value:function(){this.dom=document.createElement("div"),container.appendChild(this.dom),this.dom.classList.add("field"),this.tankResourceDom=document.createElement("div"),this.tankResourceDom.classList.add("tankResource"),this.dom.appendChild(this.tankResourceDom)}},{key:"worldSetter",set:function(t){this.world=t}},{key:"tankResourceSetter",set:function(t){this.showTankResource(t),0===t&&this.en}},{key:"size",get:function(){return{width:this.dom.clientWidth,height:this.dom.clientHeight}}},{key:"leftInWorld",get:function(){return this.world.top*Math.sin(-this.directionInWorld)-this.world.left*Math.cos(-this.directionInWorld)}},{key:"topInWorld",get:function(){return-this.world.left*Math.sin(-this.directionInWorld)-this.world.top*Math.cos(-this.directionInWorld)}},{key:"directionInWorld",get:function(){return(2*Math.PI-this.world.direction)%(2*Math.PI)}}])&&v(e.prototype,i),o&&v(e,o),t}();function S(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var b=function(){function t(e,i,o,s,r,h,l){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size={width:o,height:s},this.field=i,this.world=e,this.moveDuration=5,this.maxSpeed=50,this.target=l,this.minDistToObject=5,this.killingPower=5,this.left=r,this.top=h,this.resource=1,this.createDom(),this.markCells(),this.startMoving(),this.sound=new n("./audio/zombie.mp3",!0),this.sound.volumeSetter=.01,document.domContentLoad=function(){a.sound.play()}}var e,i,o;return e=t,(i=[{key:"distToObject",value:function(t){return Math.pow(Math.pow(this.left-t.left,2)+Math.pow(this.top-t.top,2),.5)}},{key:"deMarkCells",value:function(){void 0!==this.cells&&this.cells.forEach(function(t){t.object=null})}},{key:"markCells",value:function(){var t=this;void 0!==this.cells&&this.cells.forEach(function(e){e.object=t})}},{key:"step",value:function(){}},{key:"move",value:function(){var t=this,e=null,i=this.left,o=this.top;window.requestAnimationFrame(function n(s){e||(e=s);var r=s-e;t.leftSetter=i+t.currentSpeed.toRight*r/1e3,t.topSetter=o+t.currentSpeed.toBottom*r/1e3,r<1e3*t.moveDuration&&window.requestAnimationFrame(n)})}},{key:"startMoving",value:function(){var t=this,e=null;window.requestAnimationFrame(function i(o){document.getElementById("result").innerHTML=t.currentSpeed.toRight.toFixed(0)+" "+t.currentSpeed.toBottom.toFixed(0)+" "+t.direction.toFixed(1),e||(e=o);var n=o-e;t.distToObject(t.target)<t.target.size.width/2&&(t.target.resourceSetter=t.target.resource-n*t.killingPower/1e3),t.leftSetter=t.left+t.currentSpeed.toRight*n/1e3,t.topSetter=t.top+t.currentSpeed.toBottom*n/1e3,e=o,t.resource>0&&window.requestAnimationFrame(i)})}},{key:"delete",value:function(){this.deMarkCells(),this.world.dom.removeChild(this.dom),this.sound.deleteFromDom()}},{key:"placeDom",value:function(){this.dom.style.left=this.left-this.size.width/2+"px",this.dom.style.top=this.top-this.size.height/2+"px",this.dom.style.transform="rotate("+180*-this.direction/Math.PI+"deg)"}},{key:"createDom",value:function(){this.dom=document.createElement("div"),this.world.dom.appendChild(this.dom),this.dom.style.width=this.size.width+"px",this.dom.style.height=this.size.height+"px",this.dom.classList.add("zombie"),this.dom.innerHTML=this.resource,this.placeDom()}},{key:"leftSetter",set:function(t){this.deMarkCells(),this.left=Math.max(this.size.width/2,Math.min(this.world.size.width-this.size.width/2,t)),this.markCells(),this.placeDom()}},{key:"topSetter",set:function(t){this.deMarkCells(),this.top=Math.max(this.size.height/2,Math.min(this.world.size.height-this.size.height/2,t)),this.markCells(),this.placeDom()}},{key:"resourceSetter",set:function(t){this.resource=t,this.dom.innerHTML=this.resource,0===this.resource&&this.delete()}},{key:"direction",get:function(){return Math.atan(-(this.target.top-this.top)/(this.target.left-this.left))+(this.target.left-this.left<=0?Math.PI:0)}},{key:"currentSpeed",get:function(){return this.distToObject(this.target)<this.minDistToObject?{toRight:0,toBottom:0}:{toRight:this.maxSpeed*Math.cos(this.direction),toBottom:-this.maxSpeed*Math.sin(this.direction)}}},{key:"cells",get:function(){for(var t=Math.max(0,Math.min(this.world.sizeInCells.width-1,Math.floor((this.left-this.size.width/2)/this.world.cellSize.width))),e=Math.max(0,Math.min(this.world.sizeInCells.width-1,Math.floor((this.left+this.size.width/2)/this.world.cellSize.width))),i=Math.max(0,Math.min(this.world.sizeInCells.height-1,Math.floor((this.top-this.size.height/2)/this.world.cellSize.height))),o=Math.max(0,Math.min(this.world.sizeInCells.height-1,Math.floor((this.top+this.size.height/2)/this.world.cellSize.height))),n=[],s=t;s<=e;s++)for(var r=i;r<=o;r++)n.push(this.world.cells[s][r]);return n}}])&&S(e.prototype,i),o&&S(e,o),t}(),M=document.getElementById("container"),z=document.getElementById("result"),I=new k(M),D=new g(I,100,100,500,500,10,10),C=new m(D,I,300,300);new b(D,I,40,40,500,500,C),new b(D,I,40,40,100,100,C),new b(D,I,40,40,400,300,C);z.onclick=function(){I.dom.webkitRequestFullscreen()}}]);