{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"dist/\",i(i.s=1)}([function(t,e,i){},function(t,e,i){\"use strict\";i.r(e);i(0);function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(e,i,n,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.animTimeStep=10,this.relSpeed=800,this.tankSpeed=s,this.gunDirection=o,this.size={width:e,height:5},this.createBulletDom(n,r),this.moveBullet()}var e,i,r;return e=t,(i=[{key:\"moveBullet\",value:function(){var t=this,e=null,i=this.left,n=this.top;window.requestAnimationFrame(function r(o){e||(e=o);var s=o-e;t.leftSetter=i+t.fullSpeed.toRight*s/1e3,t.topSetter=n+t.fullSpeed.toBottom*s/1e3,t.left<field.clientWidth&&t.left>-t.size.width&&t.top<field.clientHeight&&t.top>-t.size.height?window.requestAnimationFrame(r):field.removeChild(t.bulletDom)})}},{key:\"placeBulletDom\",value:function(){this.bulletDom.style.left=\"\".concat(this.left,\"px\"),this.bulletDom.style.top=\"\".concat(this.top,\"px\")}},{key:\"createBulletDom\",value:function(t,e){this.bulletDom=document.createElement(\"div\"),this.bulletDom.classList.add(\"bullet\"),this.bulletDom.style.width=\"\".concat(this.size.width,\"px\"),this.bulletDom.style.height=\"\".concat(this.size.height,\"px\"),field.appendChild(this.bulletDom),this.leftSetter=t,this.topSetter=e,this.placeBulletDom()}},{key:\"fullSpeed\",get:function(){return{toRight:this.relSpeed*Math.cos(this.gunDirection),toBottom:-this.relSpeed*Math.sin(this.gunDirection)}}},{key:\"leftSetter\",set:function(t){this.left=t,this.placeBulletDom()}},{key:\"topSetter\",set:function(t){this.top=t,this.placeBulletDom()}}])&&n(e.prototype,i),r&&n(e,r),t}();function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.tank=e,this.barrel={size:{width:6,height:40}},this.turret={size:{width:30,height:40}},this.direction=i,this.createTankGunDom()}var e,i,n;return e=t,(i=[{key:\"rotateTurrent\",value:function(){this.turretDom.style.transform=\"rotate(\"+(180*-this.direction/Math.PI+90)+\"deg)\"}},{key:\"createTankGunDom\",value:function(){this.turretDom=document.createElement(\"div\"),this.tank.tankDom.appendChild(this.turretDom),this.turretDom.classList.add(\"tankTurret\"),this.turretDom.style.width=this.turret.size.width+\"px\",this.turretDom.style.height=this.turret.size.height+\"px\",this.turretDom.style.top=(this.tank.size.height-this.turret.size.height)/2+\"px\",this.turretDom.style.left=(this.tank.size.width-this.turret.size.width)/2+\"px\",this.rotateTurrent(),this.barrelDom=document.createElement(\"div\"),this.turretDom.appendChild(this.barrelDom),this.barrelDom.classList.add(\"tankBarrel\"),this.barrelDom.style.width=this.barrel.size.width+\"px\",this.barrelDom.style.height=this.barrel.size.height+\"px\",this.barrelDom.style.left=(this.turret.size.width-this.barrel.size.width)/2+\"px\",this.barrelDom.style.top=-this.barrel.size.height+\"px\"}},{key:\"directionSetter\",set:function(t){this.direction=t,this.rotateTurrent()}}])&&o(e.prototype,i),n&&o(e,n),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.animTimeStep=10,this.fireRate=10,this.speed={linear:200,radial:1},this.bulletWidth=5,this.gunRotateStep=.05,this.size={width:50,height:65},this.left=i,this.top=n,this.keyCodes={move:[],fight:[]},this.direction=Math.PI/2,this.createTankDom(),this.addManipulation(),this.tankGun=new s(this,Math.PI/2)}var e,i,n;return e=t,(i=[{key:\"placeTankDom\",value:function(){this.tankDom.style.left=\"\".concat(this.left-this.size.width/2,\"px\"),this.tankDom.style.top=\"\".concat(this.top-this.size.height/2,\"px\"),this.tankDom.style.transform=\"rotate(\"+(90-180*this.direction/Math.PI)+\"deg)\"}},{key:\"createTankDom\",value:function(t,e){this.tankDom=document.createElement(\"div\"),this.tankDom.classList.add(\"tank\"),this.tankDom.style.width=this.size.width+\"px\",this.tankDom.style.height=this.size.height+\"px\",field.appendChild(this.tankDom),this.placeTankDom()}},{key:\"moveTank\",value:function(){var t=this,e=setInterval(function(){0!==t.keyCodes.move.length?t.keyCodes.move.forEach(function(e){t.handleKey(e)}):clearInterval(e)},this.animTimeStep)}},{key:\"handleKey\",value:function(t){switch(t){case\"KeyW\":new r(this.bulletWidth,field,this.endOfBarrel.left,this.endOfBarrel.top,this.tankGun.direction+this.direction-Math.PI/2,this.currentSpeed);break;case\"KeyA\":this.tankGun.directionSetter=this.tankGun.direction+this.gunRotateStep;break;case\"KeyD\":this.tankGun.directionSetter=this.tankGun.direction-this.gunRotateStep;break;case\"ArrowLeft\":this.directionSetter=Math.max(0,Math.min(this.direction+this.animTimeStep*this.currentSpeed.radial/1e3,Math.PI));break;case\"ArrowRight\":this.directionSetter=Math.max(0,Math.min(this.direction-this.animTimeStep*this.currentSpeed.radial/1e3,Math.PI));break;case\"ArrowUp\":this.topSetter=Math.max(0,this.top+this.currentSpeed.toBottom*this.animTimeStep/1e3),this.leftSetter=Math.max(0,this.left+this.currentSpeed.toRight*this.animTimeStep/1e3);break;case\"ArrowDown\":this.topSetter=this.top+this.currentSpeed.toBottom*this.animTimeStep/1e3,this.leftSetter=this.left+this.currentSpeed.toRight*this.animTimeStep/1e3}}},{key:\"makeFight\",value:function(){var t=this,e=setInterval(function(){0!==t.keyCodes.fight.length?t.keyCodes.fight.forEach(function(e){t.handleKey(e)}):clearInterval(e)},1e3/this.fireRate)}},{key:\"addManipulation\",value:function(){var t=this;window.onkeyup=function(e){l(t.keyCodes.move,e.code),l(t.keyCodes.fight,e.code)},window.onkeydown=function(e){d(e.code)&&(0===t.keyCodes.move.length&&(u(t.keyCodes.move,e.code),t.moveTank()),u(t.keyCodes.move,e.code)),c(e.code)&&(0===t.keyCodes.fight.length&&(u(t.keyCodes.fight,e.code),t.makeFight()),u(t.keyCodes.fight,e.code))}}},{key:\"directionSetter\",set:function(t){this.direction=t,this.placeTankDom()}},{key:\"endOfBarrel\",get:function(){var t=this.tankGun.turret.size.height/2+this.tankGun.barrel.size.height,e=this.tankGun.direction+this.direction-Math.PI/2;return{left:this.left+t*Math.cos(e),top:this.top-t*Math.sin(e)}}},{key:\"currentSpeed\",get:function(){var t=(this.keyCodes.move.indexOf(\"ArrowUp\")>=0)-(this.keyCodes.move.indexOf(\"ArrowDown\")>=0);return{toRight:t*this.speed.linear*Math.cos(this.direction),toBottom:-t*this.speed.linear*Math.sin(this.direction),radial:t*this.speed.radial}}},{key:\"fieldBounds\",get:function(){return{left:f(field).left,right:f(field).left+field.offsetWidth,top:f(field).top,bottom:f(field).top+field.offsetHeight}}},{key:\"leftSetter\",set:function(t){this.left=t,this.placeTankDom()}},{key:\"topSetter\",set:function(t){this.top=t,this.placeTankDom()}}])&&h(e.prototype,i),n&&h(e,n),t}(),l=function(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)},u=function(t,e){t.indexOf(e)>=0||t.push(e)},c=function(t){return\"KeyA\"===t||\"KeyW\"===t||\"KeyD\"===t},d=function(t){return\"ArrowLeft\"===t||\"ArrowRight\"===t||\"ArrowUp\"===t||\"ArrowDown\"===t},f=function(t){var e=t.getBoundingClientRect();return{left:e.x,top:e.y}},p=document.getElementById(\"field\");document.getElementById(\"result\"),new a(p,345,80)}]);","extractedComments":[]}